
# WXML语法
## wx:if 条件控制
```
	<view wx:if="{{condition}}"> </view>
```
```
  <view wx:if="{{length > 5}}"> 1 </view>
  <view wx:elif="{{length > 2}}"> 2 </view>
  <view wx:else> 3 </view>
```
```
  <view wx:if="{{length > 5}}">

  </view>
  <view wx:else>

  </view>
```

## wx:for 循环控制
```
	<view wx:for="{{[zero, 1, 2, 3, 4]}}"> {{item}} </view>
	
	<view wx:for="{{list}}" wx:key="id" wx:for-item="address" wx:for-index="idx">
	  {{idx}}: {{address.name}}
	</view>

  Page({
    data: {
      item: {
        index: 0,
        msg: 'this is a template',
        time: '2016-09-15'
      }
    }
  })
```
## template 模板
```
  <template name="msgItem">
    <view>
      <text> {{index}}: {{msg}} </text>
      <text> Time: {{time}} </text>
    </view>
  </template>
```
```
	<template is="msgItem" data="{{...item}}"/>
```
```
  Page({
    data: {
      item: {
        index: 0,
        msg: 'this is a template',
        time: '2016-09-15'
      }
    }
  })
```

## import & include
```
<b> import </b>
作用域 即只会 import 目标文件中定义的 template，而不会 import 目标文件 import 的 template。

  <template name="B">
    <text> B template </text>
  </template>


  <import src="b.wxml"/>
  <template is="B"/>
```
```

<b> include </b>
include 可以将目标文件除了 <template/> <wxs/> 外的整个代码引入，相当于是拷贝到 include 位置，如：
	<include src="header.wxml"/>

```





# JS

## wx.request

	wx.request({
	  url: baseUrl+'/book/list',
	  data: {
	    openid:wx.getStorageSync('openid')
	  },
	  success: function(res){
	    console.log("data", res.data);
	    if(res.data.type=="success"){
	      that.setData({
	      	list:res.data
	    	})
	    }else{
	      wx.showToast({
	        title: res.data.msg,
	        icon: "none",
	        duration: 3000
	      })
	    }
	  },
	  complete:function(){
	  }
	})



## 跳转到子页面

	点击事件，获取当前ID
	let id = e.currentTarget.dataset.id;
	
	wx.navigateTo({
	  url: '/goodsDetail/goodsDetail?id='+id
	})
	
	wx.navigateTo({
	  url: '/pages/yajinApplyTui/yajinApplyTui'
	})


	在详情页面接收参数
	onLoad: function(options){
	
	    if(options.fromMiniProgram){
	      var data = JSON.parse(options.goods);  
	    }
	
	}

## 返回上级页面
```
 var pages = getCurrentPages(); //当前页面
 var beforePage = pages[pages.length - 2]; //前一页
 wx.navigateBack({
	 success: function () {
  	 beforePage.onLoad(); // 执行前一个页面的onLoad方法
   }
 });
```
## 普通返回上级页面
	wx.navigateBack({
	delta: 2
	})

## 数组合并
	var str3 = str1.concat(str2);
## json 转 字符串
	var str = JSON.stringify(json);
## 字符串 转 json
	var json=JSON.parse(orderGoodsExtra);

## 存储写入
		wx.setStorageSync("uname", that.data.name );
##	存储读取
		wx.getStorageSync('xxxxx')
##	存储清理
		wx.clearStorageSync() //清除全部
		wx.removeStorageSync("key") //清除指定key

## switch
```
var exp = 10;

  switch ( exp ) {
  case "10":
    console.log("string 10");
    break;
  case 10:
    console.log("number 10");
    break;
  case exp:
    console.log("var exp");
    break;
  default:
    console.log("default");
  }
```
## for 语句 
	支持使用 break，continue 关键词



## toast

```
wx.showToast({
  title: "消息",
  icon: "none",
  duration: 3000
})
```

## 返回

```
 var pages = getCurrentPages(); //当前页面
 var beforePage = pages[pages.length - 2]; //前一页
 wx.navigateBack({
	 success: function () {
  	 beforePage.onLoad(); // 执行前一个页面的onLoad方法
   }
 });
```



## 确定/取消

```
wx.showModal({
  title: '提示',
  content: '确定要删除吗？',
  success: function (sm) {
    if (sm.confirm) {
      // 用户点击了确定 可以调用删除方法了
      
    } else if (sm.cancel) {
      console.log('用户点击取消')
    }
  }
})
```



# WXSS

## 背景颜色
```
 标题栏背景颜色, json中定义
	  "navigationBarBackgroundColor": "#f3f3f3"
	"navigationBarTextStyle": "white"
 页面背景颜色 wxss
		page{
	  background-color: #f3f3f3;
	}
```
## 溢出隐藏加...
```
.book-name{
  width: 70%;
  height: 120rpx;

  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  word-wrap: break-word;
  white-space: normal !important;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
}
```

